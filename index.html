<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NosPlay</title>

<!-- Fonte -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- CSS -->
<link rel="stylesheet" href="css/log.css">
<link rel="stylesheet" href="css/style.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<!-- Firebase Config -->
<script src="js/firebase.js"></script>
<script src="js/alert.js"></script>

<!-- Apps -->
<script src="apps/HolyPlay.js"></script>

<!-- App JS -->
<script defer src="js/app.js"></script>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1e88e5">
</head>
<body>

<div class="page">

  <!-- LOGIN -->
  <section id="login">
    <div class="login-box">
      <h2>Login na NosPlay</h2>
      <input type="email" id="login-email" placeholder="Email">
      <input type="password" id="login-senha" placeholder="Senha">
      <button id="login-btn">Entrar</button>
      <button id="login-google-btn">Entrar com Google</button>
      <button id="show-register">Criar conta</button>
    </div>
  </section>

  <!-- REGISTRO -->
  <section id="register" style="display:none;">
    <div class="register-box">
      <h2>Registrar</h2>
      <input type="email" id="reg-email" placeholder="Email">
      <input type="password" id="reg-senha" placeholder="Senha">
      <button id="reg-btn">Criar conta</button>
      <button id="back-to-login">Voltar</button>
    </div>
  </section>

  <!-- HOME / LISTA DE APPS -->
  <section id="home" class="section" style="display:none;">
    <header>
      <div class="top">
        <div class="logo">NosPlay</div>
        <div class="search">
          <input id="search" placeholder="Pesquisar apps...">
        </div>
      </div>
      <div class="categories" id="cats"></div>
    </header>
    <div class="apps" id="apps"></div>
  </section>

  <!-- DETALHES DO APP -->
  <section id="details" style="display:none;"></section>

  <!-- SOBRE / POLÍTICA -->
  <section id="about" style="display:none;">
    <div class="back" onclick="goHome()">← Voltar</div>
    <h2>Sobre a NosPlay</h2>
    <p class="desc">
      A NosPlay é uma plataforma independente para distribuição de apps Android.
      Não hospedamos arquivos nos nossos servidores.
    </p>
    <h3>Política</h3>
    <p class="desc">
      Todos os aplicativos pertencem aos seus respectivos desenvolvedores.
      Caso seja detentor de direitos e queira remover algum conteúdo,
      entre em contacto.
    </p>
  </section>

</div>

<!-- PROGRESSO DE DOWNLOAD -->
<div id="download-progress" style="display:none; width:0%; height:24px; background:#2962ff; color:white; text-align:center; line-height:24px; border-radius:4px; margin:10px 0;"></div>

<!-- LIGHTBOX -->
<div id="lightbox" style="display:none;">
  <span id="prev-btn" onclick="prevSlide()">❮</span>
  <span id="next-btn" onclick="nextSlide()">❯</span>
  <span class="close" onclick="closeLightbox()">×</span>
  <img id="lightbox-img">
</div>

<!-- FOOTER -->
<footer class="footer">
  © 2025 NosPlay — Todos os direitos reservados<br>
  <a href="#" onclick="openAbout()">Sobre / Política</a>
</footer>

<script>
// ==============================
// LOGIN / REGISTRO
// ==============================
document.getElementById("login-btn").onclick = () => {
  const email = document.getElementById("login-email").value;
  const senha = document.getElementById("login-senha").value;
  if(email && senha) loginEmail(email, senha);
};

document.getElementById("login-google-btn").onclick = () => loginGoogle();

document.getElementById("show-register").onclick = () => {
  document.getElementById("login").style.display="none";
  document.getElementById("register").style.display="block";
};

document.getElementById("back-to-login").onclick = () => {
  document.getElementById("register").style.display="none";
  document.getElementById("login").style.display="block";
};

document.getElementById("reg-btn").onclick = () => {
  const email = document.getElementById("reg-email").value;
  const senha = document.getElementById("reg-senha").value;
  if(email && senha) registerEmail(email, senha);
};

// ==============================
// MOSTRAR HOME APÓS LOGIN
// ==============================
firebase.auth().onAuthStateChanged(user=>{
  if(user){
    document.getElementById("login").style.display="none";
    document.getElementById("register").style.display="none";
    document.getElementById("home").style.display="block";
    renderCategories();
    renderApps();
  } else {
    document.getElementById("login").style.display="block";
    document.getElementById("home").style.display="none";
  }
});
</script>

</body>
  </html>
